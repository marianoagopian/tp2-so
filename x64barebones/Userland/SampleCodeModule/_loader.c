/* _loader.c */
#include <stdint.h>
#include <functions.h>
#include <syscalls.h>

char *escudoBetis =
"||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||\n" 
"||||||||||||||||||||||||||||||||||||||||||||||||B?J&||||||||||||||||||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||||||||||||&##5??P##&|||||||||||||||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||||||||||&G5JJJJJJ??JJJJJYPB&||||||||||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||||||||BY?J5G#&&|B7?#|&&#G5J?5#||||||||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||&BP55J7Y#|||||||B7?#|||||||BJ?Y55GB&||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||BY?J5P?7P|||&&####P7?G###&&||||Y7JPYJ?Y#||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||&Y75#||&?7G#BGGGPPPG5??PGPPPGGGB&P7Y|||BJ75|||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||Y7P||||&Y7?5GGGGGGGG5??PGGGGGGGG5?7P|||||Y7P||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||&?7B|||#GGY??JJYPGGGP????PGGG5JJJ??5GG#|||57Y||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||G7?B|BPGGGPJ7??5GY5G5?J5GJ5GY???YGGGGP#|G??#||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||BJ?JJJ5G5YGPJ?55??YY??YJ?J55?YPPYPGYJJJ?Y#|||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||P?77JG5?JJ??77777777777777??J??PP?77?B|||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||&#G5???77??JYY55PPPP55YJJ?77???J5B#&||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||&5J?J5PPP5YJ??77??JY5PGP5J?YG||||||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||||&P5Y7~:.::.    . .:^!?5GB||||||||||||||||||||||||||||||||||||||\n"
"#PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPY7^.    J5Y^^JJJJ!    :~JPPPPPPPPPPPPPPPPPPPPPPPPPPPPGGGPPPPPP#\n"
"|#5?!:....7YYYYYY!......~YYYYYY?..^7!:.::::::^Y57^~^~JP7:::  .~7!:.^YYYYYYJ:.....:?YYYYYY~....^!?Y#|\n"
"|||&P?~.  7555555!      ^555555J ^?~  ~Y55YYYY55YYYYJY55YY5Y!  :7! :555555Y.      J555555~  .~?5#|||\n"
"|||||&PJ~.7555555!      ^555555J^?^     J5....J57 .. !57 .:?57  .77^555555Y.      J555555~:!JP&|||||\n"
"|||||||&GJ?Y55555!      ^555555Y?~    ^?Y5J:  J5!    !57  ~J55J: :?7555555Y.      J55555Y7JG&|||||||\n"
"||||||||||GJ?Y555!      ^555555J?.    .:J5^   J5! .  ~57  :?5J:.  !?555555Y.      J555J?JG&|||||||||\n"
"||||||||||||BJ?J5!      ^555555?7     ^?Y5????Y5JJY??Y5Y??J5Y.    ^?Y55555Y.      J5J?JB||||||||||||\n"
"||||||||||||||BY?!      ^555555J7     :!Y5!!!!Y5J7J!!J5J!!?5Y^    ^?Y55555Y.     .??YB||||||||||||||\n"
"||||||||||||||||B57^.   ^555555J?:    .^J5~.  Y5!    !57  :75Y^.  !?555555Y.   .~75#||||||||||||||||\n"
"||||||||||||||||||#57^. ^555555Y77    :7Y57:  Y5!    !P7  ~?55?: ^?!555555Y. .~?5#||||||||||||||||||\n"
"||||||||||||||||||||#P?^~555555J:?!   .:J5^^^^Y5?^^^^75?^^^J5!  ^?~:555555Y:~?P&||||||||||||||||||||\n"
"||||||||||||||||||||||&P?JY5555J .77: ^JJJJJJJ55YJ?J?Y5YJJJ?^  ~?^ :55555Y?JP&||||||||||||||||||||||\n"
"||||||||||||||||||||||||&PJ?Y55J   ~7!:     :J55~^!~!Y5^     ^7!:  :555Y?JG&||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||&GJ?YJ    .~7!^.  .~~: :!!!~:  .:~7!:    :5Y?JG|||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||GJ?:     .JYJ7!~::::...::^~7?JY?      ^?YB|||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||BY!:   .Y5555YY!~~~~~~7YY5555?   .^75B|||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||#Y7:  Y555555^      !555555? .^75#|||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||#57^Y555555^      !555555?~?P#|||||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||||#5?J55555^      !5555Y?JP&|||||||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||||||&PJJY55^      !55Y?JP&|||||||||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||||||||&PJJ5^      !Y?JG&|||||||||||||||||||||||||||||||||||||||||\n"
"|||||||||||||||||||||||||||||||||||||||||||&GJ!.    :7YB||||||||||||||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||||||||||||||||GJ~:^7YB||||||||||||||||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||||||||||||||||||BJY#||||||||||||||||||||||||||||||||||||||||||||||||\n"
"||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||\n\n"
;

//aguante el Betis

extern char bss;
extern char endOfBinary;

int main();

void * memset(void * destiny, int32_t c, uint64_t length);

int _start() {
	//Limpiamos BSS
	memset(&bss, 0, &endOfBinary - &bss);

	printf(escudoBetis);

	printf("Loading Real Betis Balompie SO...\n");

  sys_beep(392);
  sys_holder(6);
  sys_beep(440);
  sys_holder(4);
  sys_beep(494);
  sys_holder(6);
  sys_beep(440);
  sys_holder(4);
  sys_beep(494);
  sys_holder(6);
  sys_beep(440);
  sys_holder(4);
  sys_beep(494);
  sys_holder(6);
  sys_beep(440);
  sys_holder(4);
  sys_beep(494);
  sys_holder(5);
  sys_beep(587);
  sys_holder(5);
  sys_beep(440);
  sys_holder(6);
  sys_stop();

	return main();

}


void * memset(void * destiation, int32_t c, uint64_t length) {
	uint8_t chr = (uint8_t)c;
	char * dst = (char*)destiation;

	while(length--)
		dst[length] = chr;

	return destiation;
}
